# Hypeloop – Brain Lift

## 1. Purpose
Hypeloop is a video-centric mobile application that leverages **direct Mux uploads**, **Firebase Authentication**, and **SwiftUI** to deliver a seamless short-video experience. Key features and objectives include:

- **Direct Video Uploads**: Users can record or select videos locally and securely upload them to Mux via a pre-signed URL generated by Firebase Cloud Functions.
- **Realtime Video Feed**: SwiftUI-powered interface with a swipeable video player that dynamically fetches available videos from Mux.
- **Authentication & Security**: Firebase Authentication (Email/Password, Apple Sign In) ensures only authorized users can upload content.
- **Offline-Friendly Approach**: Local temporary file storage, with optional video transcoding before upload to optimize performance.
- **Intuitive UI**: Swipe-based gestures for liking, saving, sharing, or discarding videos.

### Scope
- **In Scope**:
  - Integration with Mux for video streaming and hosting
  - Secure serverless backend with Firebase Functions
  - SwiftUI front-end design with custom gestures
  - Apple Sign In and email/password authentication
  - Basic offline handling for temporary file storage and video selection

- **Out of Scope**:
  - Advanced video editing or effects
  - Cross-platform UI (focused solely on iOS with SwiftUI)
  - Detailed analytics or usage insights
  - Large-scale enterprise security features (beyond Firebase’s built-in measures)

---

## 2. Experts

### Mux Integration
- **Who**: Mux and serverless specialists  
- **Focus**: Generating secure pre-signed upload URLs via Firebase Functions and ensuring stable direct uploads  
- **Why Follow**: Demonstrates a scalable approach to video hosting without needing an internal custom media server  
- **Where**:
  - [Mux Docs](https://docs.mux.com/)  
  - [Mux Node SDK GitHub](https://github.com/muxinc/mux-node-sdk)

### Firebase Auth & Functions
- **Who**: Cloud services and security architects  
- **Focus**: Managing user login (Apple Sign In, email/password) and creating serverless HTTPS Callable functions for Mux logic  
- **Why Follow**: Ensures strong authentication flows and minimal backend overhead using a serverless model  
- **Where**:
  - [Firebase Authentication Docs](https://firebase.google.com/docs/auth)  
  - [Firebase Functions Docs](https://firebase.google.com/docs/functions)

### SwiftUI & Gesture Design
- **Who**: iOS UX designers specializing in SwiftUI  
- **Focus**: Creating a fluid swipe-based video player and visually appealing user interface that remains performant  
- **Why Follow**: Showcases best practices for SwiftUI navigation, custom gestures, and layering video content  
- **Where**:
  - [SwiftUI Tutorials by Apple](https://developer.apple.com/tutorials/swiftui)  
  - [Swift Forums - SwiftUI](https://forums.swift.org/c/swiftui/)

### AVKit & Video Playback
- **Who**: iOS media engineers with AVKit expertise  
- **Focus**: Handling adaptive bitrate streaming (HLS), ensuring seamless playback, and properly managing system resources  
- **Why Follow**: Proper video streaming design is essential for user experience, battery life, and performance  
- **Where**:
  - [Apple AVKit Reference](https://developer.apple.com/documentation/avkit)  
  - [HLS Authoring Specifications](https://developer.apple.com/documentation/http_live_streaming)

---

## 3. SpikyPOVs

### Truths
- **Direct-to-Mux uploads** with pre-signed URLs reduce server complexity and improve upload reliability  
- **Firebase serverless approach** requires minimal backend infrastructure while remaining highly scalable  
- **SwiftUI gestures** offer a modern, declarative way to implement intuitive swipe interactions  
- **Seamless playback with AVKit** encourages quick load times and consistent user experience  
- **Apple Sign In flow** boosts user adoption by removing friction during account creation  
- **Temporary file storage** on-device mitigates data loss when uploading large videos  
- **Adaptive streaming (HLS)** adjusts to network conditions, improving playback for diverse users  
- **Integration testing** with each step (upload, list, playback) ensures end-to-end reliability

### Myths
- **“All video hosting must be done in-house”** – Leveraging Mux’s reliable infrastructure is more efficient and cost-effective  
- **“SwiftUI isn’t production-ready”** – Proper patterns with SwiftUI gestures and state management offer powerful, stable UIs  
- **“Serverless can’t handle media workflows”** – Firebase Functions can securely handle tokens and logging for large file uploads  
- **“AVKit is too limiting for advanced features”** – AVKit supports flexible customization, including gesture overlays and theming  
- **“Apple Sign In is too complex to integrate”** – Using ASAuthorization libraries plus Firebase bridging is straightforward  
- **“You can’t optimize large video files on-device”** – AVFoundation export sessions allow for basic compression and re-encoding  
- **“Swipe gestures degrade performance”** – Well-structured SwiftUI code with minimal overhead remains fluid  
- **“Uploading a file must always block the UI”** – Background upload tasks and progress updates keep the interface responsive

---

## 4. Knowledge Tree

### Project Architecture
#### Summary
- **Cloud Functions**:  
  - Serve as the secure bridge to Mux, generating pre-signed URLs and listing assets  
  - Use environment variables for Mux credentials and ensure proper auth checks

- **SwiftUI Front-End**:  
  - Houses the video feed (swipeable) and top-level tab navigation  
  - Implements local temp file handling, progress bars, and error alerts  

- **Auth & Security**:  
  - Apple Sign In and email/password unify seamlessly into Firebase  
  - Swift concurrency (`async/await`) for clean login code  

- **Video Manager**:  
  - Maintains a queue of videos fetched from Mux, preloading them to reduce latency  
  - Supports saving videos offline for future reference  

- **Mux Interactions**:  
  - Automatic transcoding to HLS for streaming  
  - Universal thumbnail URLs for quick preview  

#### Sources

##### Firebase & Serverless Functions
- **Summary**: Secure token-based workflows and environment variable usage  
- **Link**: [Firebase Functions Docs](https://firebase.google.com/docs/functions)  
- **Insights**:
  - Minimizes server overhead  
  - Easy integration with Firebase Auth  
  - Strict environment-based credential storage

##### SwiftUI Architecture
- **Summary**: Declarative design with custom gesture handling  
- **Link**: [SwiftUI Tutorials by Apple](https://developer.apple.com/tutorials/swiftui)  
- **Insights**:
  - Reduces boilerplate for building interactive UIs  
  - Encourages reactive data flows  
  - Better synergy with Combine and async code

##### AVKit & Video Playback
- **Summary**: HLS-based approach for adaptive streaming  
- **Link**: [Apple AVKit Reference](https://developer.apple.com/documentation/avkit)  
- **Insights**:
  - Overlays can be customized for swiping gestures  
  - Automatic looping and buffering strategies  
  - Minimal additional code needed for standard playback controls

##### Mux Integration
- **Summary**: Direct uploads, simplified asset management  
- **Link**: [Mux Docs](https://docs.mux.com/)  
- **Insights**:
  - Pre-signed URLs reduce overhead  
  - JSON-based metadata for storing descriptions  
  - Public playback IDs for easy sharing  

##### Apple Sign In
- **Summary**: Simplifies account creation and sign-in flow  
- **Link**: [Sign in with Apple Dev Docs](https://developer.apple.com/sign-in-with-apple/)  
- **Insights**:
  - Better user trust and engagement  
  - Prevents typical password fatigue  
  - Works seamlessly in SwiftUI with combine-based or async flows

---

> **This brain lift document highlights Hypeloop’s unique combination of SwiftUI, Mux, and Firebase tech for an immersive short-video platform – focusing on direct Mux uploads, real-time video feeds, and secure, frictionless user authentication.**